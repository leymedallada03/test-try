<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MDRRMO Records</title>
<link rel="stylesheet" href="styles.css" />

<style>
/* ========================= GENERAL LAYOUT ========================= */
.page-container { display:block; }
.content-area { padding:18px; }
.logo { width:44px; height:44px; object-fit:contain; }

/* ========================= TOP STATS ========================= */
.new-stats {
  display:flex;
  justify-content:flex-end;
  gap:18px;
  font-size:14px;
  margin-bottom:10px;
}
.green { color:#0f7a4a; font-weight:700; }

/* ========================= SEARCH + CONTROLS ========================= */
.records-header {
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:12px;
  flex-wrap:wrap;
}

.search-center {
  flex:1;
  display:flex;
  justify-content:center;
}

.search-box {
  padding:8px 12px;
  border-radius:8px;
  border:1px solid #bbb;
  min-width:280px;
}

.right-controls {
  display:flex;
  align-items:center;
  gap:10px;
}

.brgy-dropdown {
  padding:7px 10px;
  border-radius:8px;
  border:1px solid #ccc;
}

/* ========================= ICON BUTTONS ========================= */
.icon-btn-lg {
  border:none;
  background:none;
  cursor:pointer;
  padding:6px;
  font-size:22px;
  border-radius:8px;
  transition:0.15s;
}
.icon-btn-lg:hover { background:#e8ffee; }

/* SVG refresh icon color */
.icon-refresh svg path {
  fill:#0A8A15;
}

/* ========================= EXPORT MENU ========================= */
.export-wrapper { position:relative; }

.export-dropdown {
  position:absolute;
  right:0;
  top:36px;
  background:white;
  border:1px solid #ccc;
  border-radius:8px;
  padding:6px 0;
  width:150px;
  z-index:9999;
  box-shadow:0 4px 12px rgba(0,0,0,0.1);
}
.export-dropdown div {
  padding:10px 14px;
  cursor:pointer;
}
.export-dropdown div:hover {
  background:#effff5;
}
.hidden { display:none; }

/* ========================= RECORDS TABLE ========================= */
.records-wrapper {
  overflow:auto;
  border-radius:10px;
  background:#fff;
  box-shadow:0 2px 5px rgba(0,0,0,0.05);
  margin-top:10px;
}

.records-table {
  width:100%;
  border-collapse:collapse;
  min-width:1100px;
}

.records-table th,
.records-table td {
  padding:10px;
  border-bottom:1px solid #eee;
  white-space:nowrap;
}

.records-table thead th {
  background:#f4f7f4;
  position:sticky;
  top:0;
  z-index:20;
}

/* Sticky left & right columns */
.select-col {
  position:sticky;
  left:0;
  background:#fff;
  z-index:25;
}

.actions-col {
  position:sticky;
  right:0;
  background:#fff;
  z-index:25;
}

/* ========================= COLOR CODING ========================= */
.mem-small { background:#d4f6ff; }
.mem-normal { background:#d9ffd9; }
.mem-large { background:#fff7c2; }
.mem-critical { background:#ffd6d6; }

/* ========================= MEMBER ROWS ========================= */
.member-row { background:white; }
.member-row.hidden { display:none; }
.member-row td {
  padding-left:25px;
  font-size:0.95em;
  color:#444;
}

/* ========================= HIGHLIGHT ========================= */
.hl {
  background:#ffeb8a;
  border-radius:3px;
}

/* ========================= PAGINATION ========================= */
#paginationArea {
  text-align:center;
  margin-top:15px;
}
.page-btn {
  padding:6px 12px;
  margin:0 3px;
  border-radius:6px;
  border:1px solid #ccc;
  background:white;
  cursor:pointer;
}
.page-btn.active {
  background:#0f7a4a;
  color:white;
  font-weight:bold;
}
</style>
</head>

<body>
<div class="page-container">

  <!-- ‚ñë‚ñë TOPBAR ‚ñë‚ñë -->
  <header class="topbar">
    <button id="menuToggle" class="menu-btn">‚ò∞</button>

    <div class="brand">
      <img src="assets/MDRRMO Logo.png" class="logo" alt="logo"/>
      <div>
        <div class="title">PUROK KALIGTASAN</div>
        <div class="subtitle">Disaster Risk Reduction & Management Office - Alitagtag</div>
      </div>
    </div>

    <div class="user-info">
      <span id="userName"></span>
      <button id="logoutBtn" class="logout-btn">Logout</button>
    </div>
  </header>

  <!-- ‚ñë‚ñë SIDEBAR ‚ñë‚ñë -->
  <aside class="sidebar">
      <ul>
          <li><a href="dashboard.html">üìä Dashboard</a></li>
          <li><a href="dataForm.html">üìù Data Entry</a></li>
          <li><a href="records.html" class="active">üìÅ Records</a></li>
          <li><a href="charts.html">üìà Charts</a></li>
          <li class="admin-only"><a href="users.html">üë• User Management</a></li>
      </ul>
  </aside>

  <!-- ‚ñë‚ñë MAIN CONTENT ‚ñë‚ñë -->
  <main class="content-area">

    <h2>üìÅ Household Records</h2>

    <!-- STATS -->
    <div class="top-stats new-stats">
        <span>Rows: <strong class="green" id="rowCount">0</strong></span>
        <span>Matches: <strong class="green" id="matchCount">0</strong></span>
        <span>Selected: <strong class="green" id="selectedCount">0</strong></span>
    </div>

    <!-- SEARCH + CONTROLS -->
    <div class="records-header">

        <!-- CENTER SEARCH -->
        <div class="search-center">
            <input id="searchInput" type="text" class="search-box"
                   placeholder="Search by Barangay / Name / Data ID..." />
        </div>

        <!-- RIGHT CONTROLS -->
        <div class="right-controls">

            <!-- BARANGAY DROPDOWN -->
            <select id="filterBarangay" class="brgy-dropdown">
                <option value="">All Barangays</option>
                <option>Balagbag</option><option>Concepcion</option><option>Concordia</option>
                <option>Dalipit East</option><option>Dalipit West</option><option>Dominador East</option>
                <option>Dominador West</option><option>Munlawin Sur</option><option>Munlawin Norte</option>
                <option>Muzon Primero</option><option>Muzon Segundo</option><option>Pinagkurusan</option>
                <option>Ping-As</option><option>Poblacion East</option><option>Poblacion West</option>
                <option>San Jose</option><option>San Juan</option><option>Santa Cruz</option><option>Tadlac</option>
            </select>

            <!-- REFRESH ICON -->
            <button id="refreshBtn" class="icon-btn-lg icon-refresh" title="Refresh">
              <svg width="22" height="22" viewBox="0 0 24 24">
                <path d="M12 6V3L8 7l4 4V8c2.2 0 4 1.8 4 4 0 .7-.2 1.4-.5 2l1.5 1.3c.6-.9 1-2 1-3.3 0-3.3-2.7-6-6-6zm-4.5 2C6.9 8.9 6 10.4 6 12c0 3.3 2.7 6 6 6v3l4-4-4-4v3c-2.2 0-4-1.8-4-4 0-.7.2-1.4.5-2L7.5 8z"></path>
              </svg>
            </button>

            <!-- EXPORT MENU -->
            <div class="export-wrapper">
                <button id="exportMenuBtn" class="icon-btn-lg" title="Export">üì§</button>
                <div id="exportDropdown" class="export-dropdown hidden">
                    <div onclick="exportAll()">Export All</div>
                    <div onclick="exportSelected()">Export Selected</div>
                </div>
            </div>

        </div>
    </div>

    <!-- TABLE -->
    <div class="records-wrapper">
      <table id="recordsTable" class="records-table">
        <thead id="tableHead"></thead>
        <tbody id="tableBody"></tbody>
      </table>
    </div>

    <!-- PAGINATION -->
    <div id="paginationArea"></div>

  </main>
</div>

<!-- LOADING OVERLAY -->
<div id="loading" style="
  display:none; position:fixed; inset:0;
  align-items:center; justify-content:center;
  background:rgba(255,255,255,0.7); z-index:9999;">
  <div style="background:#fff;padding:18px;border-radius:10px;
       box-shadow:0 6px 24px rgba(0,0,0,0.08);">
       Loading records‚Ä¶
  </div>
</div>

<!-- =============== SCRIPTS =============== -->
<script src="js/records.js"></script>
</body>
</html>

